{"remainingRequest":"D:\\ninja-vue\\ninja-smoothies\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ninja-vue\\ninja-smoothies\\src\\components\\EditSmoothie.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ninja-vue\\ninja-smoothies\\src\\components\\EditSmoothie.vue","mtime":1580466179124},{"path":"D:\\ninja-vue\\ninja-smoothies\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580444956338},{"path":"D:\\ninja-vue\\ninja-smoothies\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1580444971498},{"path":"D:\\ninja-vue\\ninja-smoothies\\node_modules\\babel-loader\\lib\\index.js","mtime":1580444954949},{"path":"D:\\ninja-vue\\ninja-smoothies\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580444956338},{"path":"D:\\ninja-vue\\ninja-smoothies\\node_modules\\vue-loader\\lib\\index.js","mtime":1580444971634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkYiBmcm9tICdAL2ZpcmViYXNlL2luaXQnCmltcG9ydCBzbHVnaWZ5IGZyb20gJ3NsdWdpZnknCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJFZGl0U21vb3RoaWUiLAogICAgZGF0YSgpewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNtb290aGllOm51bGwsCiAgICAgICAgICAgIGFub3RoZXI6IG51bGwsCiAgICAgICAgICAgIGZlZWRiYWNrOm51bGwKCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBFZGl0U21vb3RoaWUoKXsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5zbW9vdGhpZS50aXRsZSwgdGhpcy5zbW9vdGhpZS5pbmdyZWRpZW50cykKICAgICAgICAgICAgICAgIGlmKHRoaXMuc21vb3RoaWUudGl0bGUpewogICAgICAgICAgICAgICAgdGhpcy5mZWVkYmFjayA9IG51bGw7CgogICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgc2x1ZwogICAgICAgICAgICAgICAgdGhpcy5zbW9vdGhpZS5zbHVnID0gc2x1Z2lmeSh0aGlzLnNtb290aGllLnRpdGxlLCB7CiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICctJywKICAgICAgICAgICAgICAgICAgICByZW1vdmU6IC9bJCpfK34uKCknIiFcLTpAXS9nLAogICAgICAgICAgICAgICAgICAgIGxvd2VyOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsvLyBzbHVnaWZ5CgogICAgICAgICAgICAgICAgZGIuY29sbGVjdGlvbignc21vb3RoaWVzJykuZG9jKHRoaXMuc21vb3RoaWUuaWQpLnVwZGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuc21vb3RoaWUudGl0bGUsCiAgICAgICAgICAgICAgICAgICAgaW5ncmVkaWVudHM6IHRoaXMuc21vb3RoaWUuaW5ncmVkaWVudHMsCiAgICAgICAgICAgICAgICAgICAgc2x1ZzogdGhpcy5zbW9vdGhpZS5zbHVnCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHt0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogJ0luZGV4J30pfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgICAgICAgICB9KS8vIGNhdGNoCiAgICAgICAgICAgIH0vLyBpZgogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZmVlZGJhY2sgPSAnWW91IG11c3QgZW50ZXIgYSB2YWx1ZSB0byBhZGQgYW4gaW5ncmVkaWVudCcKCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgICBBZGRNb3JlSW5ncmVkaWVudCgpewogICAgICAgICAgICBpZih0aGlzLmFub3RoZXIpewogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0NIRUNLOiAnLCB0aGlzLmluZ3JlZGllbnRzWzBdKTsKICAgICAgICAgICAgICAgIHRoaXMuc21vb3RoaWUuaW5ncmVkaWVudHMucHVzaCh0aGlzLmFub3RoZXIpOwogICAgICAgICAgICAgICAgdGhpcy5hbm90aGVyID0gbnVsbAogICAgICAgICAgICAgICAgdGhpcy5mZWVkYmFjayA9IG51bGwKICAgICAgICAgICAgfS8vIGlmCiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5mZWVkYmFjayA9ICdZb3UgbXVzdCBlbnRlciBhIHZhbHVlIHRvIGFkZCBhbiBpbmdyZWRpZW50JwogICAgICAgICAgICB9Ly8gZWxzZQogICAgICAgIH0sLy8gQWRkTW9yZUluZ3JlZGllbnQKCiAgICAgICAgZGVsZXRlSW5nKGluZyl7CiAgICAgICAgICAgIHRoaXMuc21vb3RoaWUuaW5ncmVkaWVudHMgPSB0aGlzLnNtb290aGllLmluZ3JlZGllbnRzLmZpbHRlcihpbmdyZWRpZW50ID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBpbmdyZWRpZW50ICE9PSBpbmcKICAgICAgICAgICAgfSkvLyBmaWx0ZXIKCiAgICAgICAgfSwvLyBkZWxldGVJbmcKICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIGxldCByZWYgPSBkYi5jb2xsZWN0aW9uKCdzbW9vdGhpZXMnKS53aGVyZSgnc2x1ZycsICc9PScsIHRoaXMuJHJvdXRlLnBhcmFtcy5zbW9vdGhpZV9zbHVnKQogICAgICAgIHJlZi5nZXQoKS50aGVuKHNuYXBzaG90ID0+IHsKICAgICAgICAgICAgc25hcHNob3QuZm9yRWFjaChkb2MgPT4gewogICAgICAgICAgICAgICB0aGlzLnNtb290aGllID0gZG9jLmRhdGEoKQogICAgICAgICAgICAgICAgdGhpcy5zbW9vdGhpZS5pZCA9IGRvYy5pZAogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9Cn0K"},{"version":3,"sources":["EditSmoothie.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditSmoothie.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div v-if=\"smoothie\" class=\"edit-smoothie container\">\r\n        <h2>Edit smoothie {{smoothie.title}} smoothie</h2>\r\n                <form @submit.prevent=\"EditSmoothie\">\r\n            <div class=\"field title\">\r\n                <label for=\"title\">Smoothie title</label>\r\n                <input type=\"text\" name=\"title\" v-model=\"smoothie.title\">\r\n            </div>\r\n            <div v-for=\"(ing,index) in smoothie.ingredients\" :key=\"index\" class=\"field add-ingredient\">\r\n                <label for=\"ingredient\">Add an ingredient</label>\r\n                <input type=\"text\" name=\"ingredient\" v-model=\"smoothie.ingredients[index]\">\r\n                <i class=\"material-icons delete\" @click=\"deleteIng(ing)\">delete</i>\r\n            </div>\r\n            <div class=\"field add-ingredient\">\r\n                <label for=\"field add-ingredient\">Add an ingredient</label>\r\n                <input type=\"text\" name=\"add-ingredient\" @keydown.tab.prevent=\"AddMoreIngredient\" v-model=\"another\">\r\n            </div>\r\n            <div class=\"field center-align\">\r\n                <p v-if=\"feedback\" class=\"red-text\"> {{feedback}}</p>\r\n                <button class=\"btn pink\">Update Smoothie</button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import db from '@/firebase/init'\r\n    import slugify from 'slugify'\r\n    export default {\r\n        name: \"EditSmoothie\",\r\n        data(){\r\n            return {\r\n                smoothie:null,\r\n                another: null,\r\n                feedback:null\r\n\r\n            }\r\n        },\r\n        methods: {\r\n            EditSmoothie(){\r\n                console.log(this.smoothie.title, this.smoothie.ingredients)\r\n                    if(this.smoothie.title){\r\n                    this.feedback = null;\r\n\r\n                    // create a slug\r\n                    this.smoothie.slug = slugify(this.smoothie.title, {\r\n                        replacement: '-',\r\n                        remove: /[$*_+~.()'\"!\\-:@]/g,\r\n                        lower: true\r\n                    });// slugify\r\n\r\n                    db.collection('smoothies').doc(this.smoothie.id).update({\r\n                        title: this.smoothie.title,\r\n                        ingredients: this.smoothie.ingredients,\r\n                        slug: this.smoothie.slug\r\n                    }).then(() => {this.$router.push({name: 'Index'})}).catch(err => {\r\n                        console.log(err)\r\n                    })// catch\r\n                }// if\r\n                else {\r\n                    this.feedback = 'You must enter a value to add an ingredient'\r\n\r\n                }\r\n            },\r\n             AddMoreIngredient(){\r\n                if(this.another){\r\n                    // console.log('CHECK: ', this.ingredients[0]);\r\n                    this.smoothie.ingredients.push(this.another);\r\n                    this.another = null\r\n                    this.feedback = null\r\n                }// if\r\n                else {\r\n                    this.feedback = 'You must enter a value to add an ingredient'\r\n                }// else\r\n            },// AddMoreIngredient\r\n\r\n            deleteIng(ing){\r\n                this.smoothie.ingredients = this.smoothie.ingredients.filter(ingredient => {\r\n                    return ingredient !== ing\r\n                })// filter\r\n\r\n            },// deleteIng\r\n        },\r\n        created() {\r\n            let ref = db.collection('smoothies').where('slug', '==', this.$route.params.smoothie_slug)\r\n            ref.get().then(snapshot => {\r\n                snapshot.forEach(doc => {\r\n                   this.smoothie = doc.data()\r\n                    this.smoothie.id = doc.id\r\n                })\r\n            })\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .edit-smoothie {\r\n        margin-top: 60px;\r\n        padding: 20px;\r\n        max-width: 500px;\r\n    }\r\n\r\n    .edit-smoothie h2 {\r\n        font-size: 2em;\r\n        margin: 20px auto;\r\n    }\r\n\r\n    .edit-smoothie .field {\r\n        margin: 20px auto;\r\n        position: relative;\r\n    }\r\n    .edit-smoothie .delete{\r\n        position: absolute;\r\n        right: 0;\r\n        bottom: 16px;\r\n        color: #aaa;\r\n        font-size: 1.4em;\r\n        cursor: pointer;\r\n\r\n    }\r\n</style>"]}]}